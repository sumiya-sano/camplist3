<h1>mypage</h1>

<p>名前 : <%= @user.name %></p>
<p>メールアドレス : <%= @user.email %></p>
<p>プロフィール : <%= @user.profile %></p>

<% if current_user.id == @user.id %>
  <%= link_to "edit", edit_user_registration_path %>
<% end %>

<br>
<h2>post list</h2>
<% @user.posts.each do |p| %>
  <%= p.user.name %>
  <div class = "post">
    <%= image_tag p.image_url, class:"post-image" if p.image? %>
      <%= p.title %>
      <%= p.user.name %>

    <% if current_user.already_liked?(p) %>
        <%= link_to post_like_path(id: p.id, post_id: p.id), method: :delete do %>
          <i class="fas fa-heart"></i><%= p.likes.count %>
        <% end %>
    <% else %>
        <%= link_to post_likes_path(id: p.id, post_id: p.id), method: :post do %>
          <i class="far fa-heart"></i><%= p.likes.count %>
        <% end %>
    <% end %>

    <br>
    <%= link_to "see more", post_path(p.id) %>
    <%= link_to "edit", edit_post_path(p.id) %>
    <%= button_to "delete", post_path(p.id), method: :delete %>
  </div>
<% end %>


<%= @user.follow_count %>
<%= link_to "follow list", {controller: :users,action: :follow_list,user_id: @user.id}, method: :get %>
<%# クリックすると、フォローリストに飛ぶ %>
<%= @user.followers_count %>
<%= link_to "follower list", {controller: :users,action: :follower_list,user_id: @user.id}, method: :get %>
<%# クリックすると、フォロワーリストに飛ぶ %>


<%# ユーザーがカレントユーザーじゃなかったら、'_follow_form.html.erb'を表示 %>


<div id="follow_form">
  <% if current_user.following? @user %>
    <%= link_to "UnFollow", {controller: :users,action: :unfollow,user_id: @user.id}, method: :put %>
  <% else %>
    <%= link_to "Follow", {controller: :users,action: :follow,user_id: @user.id}, method: :put %>
  <% end %>
</div>

<%# フォローしてたらフォロー解除ボタンを、フォローしてなかったらフォローボタンを表示 %>
