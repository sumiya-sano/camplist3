<h3>post一覧</h3>

<h3>タグ検索</h3>
 <%= form_tag({controller:"posts",action:"index"}, method: :get) do %>
   <%= text_field_tag :search %>
   <%= submit_tag '検索する'  %>
<% end %>

<br>

<div class="posts-container">
    <% @posts.each do |p| %>
        <div class = "post">
            <%= image_tag p.image_url, class:"post-image" if p.image? %>
                <%= p.title %>
                <a href="/users/<%= p.user.id %>"><%= p.user.name %></a>
                <% p.tag_list.each do |tag| %>
  　                <span style="background-color: #e9e9e9; border-radius: 5px;"><%= tag %></span>
　              <% end %>

              <% if current_user.already_liked?(p) %>
                <%= link_to post_like_path(id: p.id, post_id: p.id), method: :delete do %>
                    <i class="fas fa-heart"></i><%= p.likes.count %>
                <% end %>
              <% else %>
                <%= link_to post_likes_path(id: p.id, post_id: p.id), method: :post do %>
                    <i class="far fa-heart"></i><%= p.likes.count %>
                <% end %>
              <% end %>

            <%= link_to "see more", post_path(p.id) %>
            <% if user_signed_in? && current_user.id == p.user_id %>
                <%= link_to "edit", edit_post_path(p.id) %>
                <%= button_to "delete", post_path(p.id), method: :delete %>
            <% end %> 
        </div>
    <% end %>
</div>

 <%= paginate @posts %>
